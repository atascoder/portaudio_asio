# ‚ö° –ë–´–°–¢–†–ê–Ø –°–ü–†–ê–í–ö–ê - –ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏

## –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?

‚úÖ –Ø –¥–æ–±–∞–≤–∏–ª **—Ñ–∞–π–ª–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ portaudio, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –∫–∞–Ω–∞–ª–∞–º–∏

## 3 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞:

### 1Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—É—é DLL

**GitHub Actions:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://github.com/atascoder/portaudio_asio/actions
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π workflow **Build PortAudio for Windows**
3. –°–∫–∞—á–∞–π—Ç–µ `portaudio-windows-x64-release` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
4. –í–æ–∑—å–º–∏—Ç–µ `portaudio.dll`

**–ò–ª–∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:**
```powershell
cd portaudio
mkdir build && cd build
cmake .. -G "Visual Studio 17 2022" -A x64 -DPA_USE_ASIO=ON -DCMAKE_PREFIX_PATH="C:\path\asio"
cmake --build . --config Release
```

### 2Ô∏è‚É£ –ó–∞–º–µ–Ω–∏—Ç—å DLL

- –ù–∞–π–¥–∏—Ç–µ –≤–∞—à—É —Ç–µ–∫—É—â—É—é `portaudio.dll`
- –°–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é: `portaudio.dll.backup`
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π `portaudio.dll`

### 3Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏

**–°–ø–æ—Å–æ–± –ê - –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π:**
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –≥–¥–µ –ª–µ–∂–∏—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª: portaudio_asio_debug.log
3. –û—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –ë–ª–æ–∫–Ω–æ—Ç–æ–º
```

**–°–ø–æ—Å–æ–± –ë - PowerShell:**
```powershell
Get-Content portaudio_asio_debug.log -Tail 50
```

**–°–ø–æ—Å–æ–± –í - Command Prompt:**
```cmd
type portaudio_asio_debug.log
```

## üéØ –ß—Ç–æ –∏—â–µ–º –≤ –ª–æ–≥–µ?

### ‚úÖ –•–û–†–û–®–û (–∑–≤—É–∫ –±—É–¥–µ—Ç –≤ –∫–∞–Ω–∞–ª–∞—Ö 3-4):
```
Setting outputChannelSelectors[0] = 2 (physical channel 3)
Setting outputChannelSelectors[1] = 3 (physical channel 4)
Output channel 0 (phys 2) -> ASIO buffer index 0 (SUCCESS)
Output channel 1 (phys 3) -> ASIO buffer index 1 (SUCCESS)
```

### ‚ùå –ü–õ–û–•–û (–∑–≤—É–∫ –±—É–¥–µ—Ç –≤ –∫–∞–Ω–∞–ª–∞—Ö 1-2):
```
Output channel 0 (phys 2) -> FALLBACK to index 0 (NOT FOUND in ASIO buffers!)
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `FALLBACK`:
- –ó–Ω–∞—á–∏—Ç –≤–∞—à ASIO –¥—Ä–∞–π–≤–µ—Ä **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç** –≤—ã–±–æ—Ä –∫–∞–Ω–∞–ª–æ–≤
- –ù—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ (—Å–º. [HOW_TO_DEBUG.md](HOW_TO_DEBUG.md))

## üìã –ù–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:

- [HOW_TO_DEBUG.md](HOW_TO_DEBUG.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ—Ç–ª–∞–¥–∫–µ
- [LOG_LOCATION.md](LOG_LOCATION.md) - –í—Å–µ —Å–ø–æ—Å–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ª–æ–≥ —Ñ–∞–π–ª

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **–Ω–æ–≤—É—é DLL** (—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ PortAudio
3. –û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥ —Ñ–∞–π–ª
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ **—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ª–æ–≥–∞**

---

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º:** `portaudio/src/hostapi/asio/pa_asio.cpp`

**–ß—Ç–æ –¥–æ–±–∞–≤–∏–ª–æ—Å—å:**
- –§—É–Ω–∫—Ü–∏—è `PaAsio_DebugLog()` –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ OpenStream() —Ñ—É–Ω–∫—Ü–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ outputChannelSelectors
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ ASIO –±—É—Ñ–µ—Ä–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –±—É—Ñ–µ—Ä–æ–≤ –∫ –∫–∞–Ω–∞–ª–∞–º
